(this["webpackJsonptfjs-sr"]=this["webpackJsonptfjs-sr"]||[]).push([[0],{67:function(e,n,t){e.exports=t(99)},72:function(e,n,t){},76:function(e,n){},77:function(e,n){},88:function(e,n){},91:function(e,n){},92:function(e,n){},99:function(e,n,t){"use strict";t.r(n);var r=t(30),a=t.n(r),o=t(48),c=t.n(o),s=(t(72),t(3)),u=t(8),i=t(11),l=t(12),f=t(2),p=t.n(f),d=t(10),h=t(98),m=t(93),v=null;function w(){return(w=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.loadGraphModel("carn_x2_js/model.json");case 2:v=e.sent,console.log("model loaded");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){w.apply(this,arguments)}();var g=function(){var e=Object(d.a)(p.a.mark((function e(n,t){var r,a,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n.data,a=n.width*n.height,o=new Int32Array(a*t),c=0;c<a;c++)for(s=0;s<t;++s)o[c*t+s]=r[4*c+s];return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(p.a.mark((function e(n,t){var r,a,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n,t);case 2:return r=e.sent,a=[1,n.height,n.width,t],o=h.tensor4d(r,a,"float32"),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function x(e){return e=Math.round(e),e=Math.max(0,e),e=Math.min(e,255)}function b(e){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(p.a.mark((function e(n){var t,r,a,o,c,s,u,i,l,f,d,h,m=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=m.length>1&&void 0!==m[1]&&m[1],r=n.shape[1],a=n.shape[2],(o=document.createElement("canvas")).width=a,o.height=r,c=o.getContext("2d"),s=new ImageData(a,r),u=new Uint8ClampedArray(a*r*4),i=n.dataSync(),l=0,f=0;f<r;f++)for(d=0;d<a;d++)u[(h=4*(f*a+d))+0]=x(i[l]),u[h+1]=x(i[l+1]),u[h+2]=x(i[l+2]),u[h+3]=255,l+=3;s.data.set(u),c.putImageData(s,0,0),t&&(o.style.transform="scale(2)",o.style.transformOrigin="0"),document.querySelector("body").appendChild(o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){Object(i.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).upload=function(e){var n=e.target.files[0],t=new FileReader;t.onload=function(){var e=Object(d.a)(p.a.mark((function e(n){var t,r,a,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.target.result,r=m.decode(t,!0),console.log(r),e.next=5,y(r,3);case 5:if(a=e.sent,console.log(a),console.log("Draw Original"),b(a,!0),o=!0,!(c=!0)){e.next=15;break}return e.next=14,h.transpose(a,[0,3,1,2]);case 14:a=e.sent;case 15:return o&&(a=h.div(a,255)),e.next=18,v.executeAsync(a);case 18:s=e.sent,c&&(s=h.transpose(s,[0,2,3,1])),o&&(s=h.mul(s,255)),console.log("Draw Better"),b(s);case 23:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t.onerror=function(e){console.error(e)},t.readAsArrayBuffer(n)},e}return Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("h3",null,"X2"),a.a.createElement("input",{type:"file",onChange:this.upload}))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[67,1,2]]]);
//# sourceMappingURL=main.b800bd1e.chunk.js.map